# CarRent-BinIO ‚Äî README

‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á **‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πà‡∏≤‡∏£‡∏ñ‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏ö‡∏ô‡∏≤‡∏£‡∏µ (Binary I/O)** ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏î‡πâ‡∏ß‡∏¢ Python Standard Library ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÉ‡∏ä‡πâ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á **fixed‚Äëlength record + `struct` + ‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡πÅ‡∏ö‡∏ö open addressing** ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏ö‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡∏°‡∏¥‡∏ô‡∏±‡∏• (CRUD + View + Report)

> ‡πÇ‡∏Ñ‡πâ‡∏î‡∏´‡∏•‡∏±‡∏Å‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà `car_rental_binio.py`
> ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡πÅ‡∏¢‡∏Å‡πÑ‡∏ü‡∏•‡πå) ‡∏Ñ‡∏∑‡∏≠ `seed_sample_data.py`

---

## ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏Å

* 3 ‡πÑ‡∏ü‡∏•‡πå‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: `customers.bin`, `cars.bin`, `contracts.bin` (+ ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô `report.txt`)
* ‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏Ñ‡∏á‡∏ó‡∏µ‡πà, ‡∏™‡∏ï‡∏£‡∏¥‡∏á‡∏ï‡∏±‡∏î/‡πÄ‡∏ï‡∏¥‡∏° (`\x00`) ‡πÉ‡∏´‡πâ‡∏û‡∏≠‡∏î‡∏µ, **Little‚ÄëEndian**
* Header 128B + Index 16B/slot, ‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡πÅ‡∏ö‡∏ö linear probing (open addressing)
* **Soft delete** (‡∏ï‡∏±‡πâ‡∏á `flag=0`) + **tombstone** ‡∏ó‡∏µ‡πà index + **free‚Äëlist** reuse ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á
* ‡πÄ‡∏°‡∏ô‡∏π: Create/Add, Read/View, Update, Delete, Filter, Stats, Report

## ‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏∞‡∏ö‡∏ö

* Python **3.10+**
* ‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Standard Library (`struct`, `os`, `argparse`, `datetime` ‡∏Ø‡∏•‡∏Ø)
* ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

---

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

```
project/
‚îú‚îÄ car_rental_binio.py       # ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏´‡∏•‡∏±‡∏Å (‡πÄ‡∏°‡∏ô‡∏π CRUD/REPORT)
‚îú‚îÄ seed_sample_data.py       # ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (standalone)
‚îî‚îÄ data/                     # ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏Å‡πá‡∏ö .bin ‡πÅ‡∏•‡∏∞ report.txt (‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
```

---

## ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß (Quick Start)

1. ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥):

```bash
# macOS/Linux
python3 seed_sample_data.py --data-dir data --customers 10 --cars 10 --contracts 5 --report

# Windows (PowerShell)
python seed_sample_data.py --data-dir data --customers 10 --cars 10 --contracts 5 --report
```

2. ‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏´‡∏•‡∏±‡∏Å

```bash
python car_rental_binio.py --data-dir data
```

3. ‡πÉ‡∏ô‡πÄ‡∏°‡∏ô‡∏π ‡∏Å‡∏î `5` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô `report.txt` ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏ß‡∏•‡∏≤

---

## ‡πÄ‡∏°‡∏ô‡∏π (‡∏Ñ‡∏£‡πà‡∏≤‡∏ß ‡πÜ)

* **1) Add**: ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ / ‡∏£‡∏ñ / ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà
* **2) Update**: ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ / ‡∏£‡∏ñ / ‡∏Ñ‡∏∑‡∏ô‡∏£‡∏ñ (‡∏õ‡∏¥‡∏î‡∏™‡∏±‡∏ç‡∏ç‡∏≤)
* **3) Delete**: ‡∏•‡∏ö‡πÅ‡∏ö‡∏ö *soft delete* (‡πÄ‡∏Å‡πá‡∏ö‡∏ã‡∏≤‡∏Å‡πÉ‡∏ô index + ‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ free‚Äëlist)
* **4) View**: ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ß, ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î, ‡πÅ‡∏ö‡∏ö‡∏Å‡∏£‡∏≠‡∏á, ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏ß‡∏°
* **5) Report**: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ `report.txt`

---

## ‡πÅ‡∏ö‡∏ö‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### 1) Customer (128B)

`<B I 13s 50s 10s I B 45x>`

| ‡∏ü‡∏¥‡∏•‡∏î‡πå      | ‡∏ä‡∏ô‡∏¥‡∏î | ‡∏Ç‡∏ô‡∏≤‡∏î | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏                              |
| ---------- | ---- | ---: | ------------------------------------- |
| flag       | B    |    1 | 0=Deleted, 1=Active                   |
| cus\_id    | I    |    4 | PK                                    |
| id\_card   | 13s  |   13 | UTF‚Äë8 fixed, pad `\x00`               |
| name       | 50s  |   50 | UTF‚Äë8 fixed                           |
| phone      | 10s  |   10 | UTF‚Äë8 fixed                           |
| birth\_ymd | I    |    4 | YYYYMMDD                              |
| gender     | B    |    1 | 0=unk,1=male,2=female                 |
| padding    | 45x  |   45 | + **free‚Äëlist pointer** ‡∏ó‡∏µ‡πà offset 83 |

### 2) Cars (128B)

`<B I 12s 12s 16s H I I B I 68x>`

| ‡∏ü‡∏¥‡∏•‡∏î‡πå          | ‡∏ä‡∏ô‡∏¥‡∏î | ‡∏Ç‡∏ô‡∏≤‡∏î | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏                                     |
| -------------- | ---- | ---: | -------------------------------------------- |
| flag           | B    |    1 | 0=Deleted, 1=Active                          |
| car\_id        | I    |    4 | PK                                           |
| license\_plate | 12s  |   12 | UTF‚Äë8 fixed                                  |
| brand          | 12s  |   12 | UTF‚Äë8 fixed                                  |
| model          | 16s  |   16 | UTF‚Äë8 fixed                                  |
| year           | H    |    2 | ‡∏û.‡∏®./‡∏Ñ.‡∏®.‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î = ‡∏Ñ.‡∏®.             |
| rate\_cents    | I    |    4 | ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤/‡∏ß‡∏±‡∏ô ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå                      |
| odometer\_km   | I    |    4 | ‡πÄ‡∏•‡∏Ç‡πÑ‡∏°‡∏•‡πå                                      |
| status         | B    |    1 | 0=available,1=rented,2=maintenance,3=retired |
| updated\_at    | I    |    4 | Unix timestamp                               |
| padding        | 68x  |   68 | + **free‚Äëlist pointer** ‡∏ó‡∏µ‡πà offset 60        |

### 3) Rental Contract (64B)

`<B I I I I I I B 38x>`

| ‡∏ü‡∏¥‡∏•‡∏î‡πå        | ‡∏ä‡∏ô‡∏¥‡∏î | ‡∏Ç‡∏ô‡∏≤‡∏î | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏                              |
| ------------ | ---- | ---: | ------------------------------------- |
| flag         | B    |    1 | 0=Deleted, 1=Active                   |
| rent\_id     | I    |    4 | PK                                    |
| cus\_id      | I    |    4 | FK ‚Üí customers.cus\_id                |
| car\_id      | I    |    4 | FK ‚Üí cars.car\_id                     |
| rent\_ymd    | I    |    4 | YYYYMMDD                              |
| return\_ymd  | I    |    4 | 0=‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô                           |
| total\_cents | I    |    4 | ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå                           |
| returned     | B    |    1 | 0=open, 1=closed                      |
| padding      | 38x  |   38 | + **free‚Äëlist pointer** ‡∏ó‡∏µ‡πà offset 26 |

> **Endianness:** Little‚ÄëEndian (`'<'`)

---

## Header & Index (‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏ö‡∏ô‡∏≤‡∏£‡∏µ)

* **Header (128B)**: `<'4s B B H I I I I I i I 92x'>`

  * `magic(4)`, `version(1)`, `endian(1)`, `record_size(2)`, `created_at(4)`, `updated_at(4)`,
    `next_id(4)`, `active_count(4)`, `deleted_count(4)`, `free_head(4)`, `index_slots(4)`
* **Index slot (16B)**: `<'I I 8x'>` ‚áí `key`, `rec_index` (+ padding)
* ‡∏Å‡∏≤‡∏£‡∏•‡∏ö: ‡∏ó‡∏≥ **tombstone** ‡πÉ‡∏ô‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏≤ `0xFFFFFFFF` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á probing
* **Free‚Äëlist**: ‡πÄ‡∏Å‡πá‡∏ö pointer (`int32`) ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì padding ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á

---

## ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (Report)

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡πâ‡∏≠ 5 ‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡πà‡∏≤‡∏ô `seed_sample_data.py --report` ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏∞‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ:

```
Car Rent System ‚Äî Summary Report (Sample)
Generated At : 2025-08-26 14:00:00 (+0700)
App Version  : 1.0
Endianness   : Little-Endian
Encoding     : UTF-8 (fixed-length)

 CarID | Plate      | Brand      | Model      | Year | Rate (THB/day) | Status | Rented
-----  | ---------- | ---------- | ---------- | ---- | -------------- | ------ | ------
 1001  | ABC-1234   | Toyota     | Camry      | 2021 |       1500.00  | Active | Yes
 ...
```

---

## ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢

```bash
# ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
python seed_sample_data.py --data-dir data --customers 20 --cars 20 --contracts 10 --report

# ‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏´‡∏•‡∏±‡∏Å
python car_rental_binio.py --data-dir data
```

---

## ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢ (Troubleshooting)

* **bad file format**: ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏™‡πÄ‡∏õ‡∏Å/‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô ‚áí ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå `.bin` ‡πÄ‡∏Å‡πà‡∏≤‡πÉ‡∏ô `data/` ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
* **duplicate key** ‡∏ï‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°: `*_id` ‡∏ã‡πâ‡∏≥‡πÉ‡∏ô‡∏î‡∏±‡∏ä‡∏ô‡∏µ ‚áí ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô id (‡∏õ‡∏Å‡∏ï‡∏¥‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ `next_id` ‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∂‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏Å‡∏ï‡∏¥)
* **index full**: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡πÑ‡∏°‡πà‡∏û‡∏≠ ‚áí ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ `slots` ‡∏ï‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà (‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î default 1024/2048)
* **NoneType** ‡∏ï‡∏≠‡∏ô‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏£‡∏Ñ‡∏Ñ‡∏≠‡∏£‡πå‡∏î: ‡πÑ‡∏ü‡∏•‡πå/‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ ‚áí ‡∏•‡∏ö `.bin` ‡πÅ‡∏•‡πâ‡∏ß seed ‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢ `seed_sample_data.py`

---

## ‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï (License)

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ/‡∏™‡∏≠‡∏ô ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏≠‡∏¥‡∏™‡∏£‡∏∞‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£/‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô

---

## ‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤

* ‡πÇ‡∏Ñ‡πâ‡∏î‡∏´‡∏•‡∏±‡∏Å: `car_rental_binio.py (clean)`
* ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå seed: `seed_sample_data.py`

> ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏õ‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô/‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå/‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏™‡∏ï‡∏£‡∏¥‡∏á ‡πÄ‡∏û‡∏¥‡πà‡∏° export CSV/JSON ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ï‡∏Å‡πÑ‡∏ü‡∏•‡πå I/O ‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏°‡∏î‡∏π‡∏• ‡πÅ‡∏ß‡∏∞‡∏ö‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö üôÇ
